{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst inputEl = document.querySelector(\"#datetime-picker\");\nconst startBtn = document.querySelector(\"[data-start]\");\n\nconst daysEl = document.querySelector(\"[data-days]\");\nconst hoursEl = document.querySelector(\"[data-hours]\");\nconst minutesEl = document.querySelector(\"[data-minutes]\");\nconst secondsEl = document.querySelector(\"[data-seconds]\");\n\nlet userSelectedDate = null;\nlet intervalId = null;\n\nstartBtn.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n    minuteIncrement: 1,\n  locale: {                \n    weekdays: {\n      ...flatpickr.l10ns.default.weekdays,\n      firstDayOfWeek: 1,\n      shorthand: [\"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n    },\n  },\n  \n\n  onClose(selectedDates) {\n    const chosenDate = selectedDates[0];\n    const now = new Date();\n\n    if (chosenDate <= now) {\n      userSelectedDate = null;\n      startBtn.disabled = true;\n\n      iziToast.error({\n        title: \"Error\",\n        message: \"Please choose a date in the future\",\n        position: \"topRight\",\n      });\n\n      return;\n    }\n\n    userSelectedDate = chosenDate;\n    startBtn.disabled = false;\n  },\n};\n\nflatpickr(inputEl, options);\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, \"0\");\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction updateUI({ days, hours, minutes, seconds }) {\n  daysEl.textContent = addLeadingZero(days); \n  hoursEl.textContent = addLeadingZero(hours);\n  minutesEl.textContent = addLeadingZero(minutes);\n  secondsEl.textContent = addLeadingZero(seconds);\n}\n\nfunction setAllZero() {\n  updateUI({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n}\n\nstartBtn.addEventListener(\"click\", () => {\n  if (!userSelectedDate) return;\n\n  startBtn.disabled = true;\n  inputEl.disabled = true;\n  tick();\n\n  intervalId = setInterval(tick, 1000);\n});\n\nfunction tick() {\n  const now = Date.now();\n  const target = userSelectedDate.getTime();\n  const delta = target - now;\n\n  if (delta <= 0) {\n    clearInterval(intervalId);\n    intervalId = null;\n\n    setAllZero();\n\n    inputEl.disabled = false;\n    startBtn.disabled = true;\n    userSelectedDate = null;\n\n    return;\n  }\n\n  const time = convertMs(delta);\n  updateUI(time);\n}"],"names":["inputEl","startBtn","daysEl","hoursEl","minutesEl","secondsEl","userSelectedDate","intervalId","options","flatpickr","selectedDates","chosenDate","iziToast","addLeadingZero","value","convertMs","ms","days","hours","minutes","seconds","updateUI","setAllZero","tick","now","delta","time"],"mappings":"+IAOA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAW,SAAS,cAAc,cAAc,EAEhDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAEzD,IAAIC,EAAmB,KACnBC,EAAa,KAEjBN,EAAS,SAAW,GAEpB,MAAMO,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACf,gBAAiB,EACnB,OAAQ,CACN,SAAU,CACR,GAAGC,EAAU,MAAM,QAAQ,SAC3B,eAAgB,EAChB,UAAW,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,CACrD,CACF,EAGD,QAAQC,EAAe,CACrB,MAAMC,EAAaD,EAAc,CAAC,EAGlC,GAAIC,GAFQ,IAAI,KAEO,CACrBL,EAAmB,KACnBL,EAAS,SAAW,GAEpBW,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,UAClB,CAAO,EAED,MACD,CAEDN,EAAmBK,EACnBV,EAAS,SAAW,EACrB,CACH,EAEAQ,EAAUT,EAASQ,CAAO,EAE1B,SAASK,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASC,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAS,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACnDlB,EAAO,YAAcW,EAAeI,CAAI,EACxCd,EAAQ,YAAcU,EAAeK,CAAK,EAC1Cd,EAAU,YAAcS,EAAeM,CAAO,EAC9Cd,EAAU,YAAcQ,EAAeO,CAAO,CAChD,CAEA,SAASE,GAAa,CACpBD,EAAS,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,CACxD,CAEApB,EAAS,iBAAiB,QAAS,IAAM,CAClCK,IAELL,EAAS,SAAW,GACpBD,EAAQ,SAAW,GACnBuB,IAEAhB,EAAa,YAAYgB,EAAM,GAAI,EACrC,CAAC,EAED,SAASA,GAAO,CACd,MAAMC,EAAM,KAAK,MAEXC,EADSnB,EAAiB,UACTkB,EAEvB,GAAIC,GAAS,EAAG,CACd,cAAclB,CAAU,EACxBA,EAAa,KAEbe,IAEAtB,EAAQ,SAAW,GACnBC,EAAS,SAAW,GACpBK,EAAmB,KAEnB,MACD,CAED,MAAMoB,EAAOX,EAAUU,CAAK,EAC5BJ,EAASK,CAAI,CACf"}